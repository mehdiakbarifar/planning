/* ----- CSS Variables for Themes ----- */
:root {
  --background-color: #0d0d0d;
  --section-bg: #1c1c1c;
  --header-bg: #161616;
  --footer-bg: #161616;
  --heading-bg: #1c1c1c;
  --heading-text: #e0e0e0;
  --text-color: #e0e0e0;
}

/* Theme: Dark (Default) */
body.theme-dark {
  --background-color: #0d0d0d;
  --section-bg: #1c1c1c;
  --heading-bg: #1c1c1c;
  --heading-text: #e0e0e0;
  --text-color: #e0e0e0;
}

/* Theme: Light */
body.theme-light {
  --background-color: #f5f5f5;
  --section-bg: #ffffff;
  --heading-bg: #f5f5f5;
  --heading-text: #333;
  --text-color: #333;
}

/* Theme: Dark Colored (Dark with colored section headers) */
body.theme-dark-colored {
  --background-color: #0d0d0d;
  --section-bg: #1c1c1c;
  --heading-bg: #3F51B5;
  --heading-text: #fff;
  --text-color: #e0e0e0;
}

/* Theme: Light Colored (Light with colored section headers) */
body.theme-light-colored {
  --background-color: #f5f5f5;
  --section-bg: #ffffff;
  --heading-bg: #3F51B5;
  --heading-text: #fff;
  --text-color: #333;
}

/* Theme: Gray */
body.theme-gray {
  --background-color: #808080;
  --section-bg: #999999;
  --heading-bg: #666666;
  --heading-text: #fff;
  --text-color: #333;
}

/* Additional themes */

/* Vintage */
body.theme-vintage {
  --background-color: #f7f1e3;
  --section-bg: #ffffff;
  --heading-bg: #a67c52;
  --heading-text: #2c2117;
  --text-color: #2c2117;
}

/* Ocean */
body.theme-ocean {
  --background-color: #2b3a67;
  --section-bg: #3e5c8a;
  --heading-bg: #1b2a4e;
  --heading-text: #ffffff;
  --text-color: #d1e0f0;
}

/* Forest */
body.theme-forest {
  --background-color: #2e403f;
  --section-bg: #3e5c58;
  --heading-bg: #4a6f5c;
  --heading-text: #f0f8f0;
  --text-color: #d3e4dc;
}

/* Sunset */
body.theme-sunset {
  --background-color: #ffcc99;
  --section-bg: #ffe6d9;
  --heading-bg: #ff9966;
  --heading-text: #663300;
  --text-color: #663300;
}

/* Neon */
body.theme-neon {
  --background-color: #000;
  --section-bg: #111;
  --heading-bg: #0ff;
  --heading-text: #000;
  --text-color: #0ff;
}

/* ----- Base Reset & Global Styles ----- */
* {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}
html, body {
  height: 100vh;
  width: 100vw;
  overflow: hidden;
  font-family: 'B Nazanin', 'Vazir', 'Tahoma', sans-serif;
  background-color: var(--background-color);
  color: var(--text-color);
  direction: ltr;
}

/* ----- Header ----- */
header {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 10vh;
  background: var(--header-bg);
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 0 20px;
  border-bottom: 1px solid #333;
  z-index: 1100;
}
.header-left, .header-title, .header-right {
  flex: 1;
}
.header-left {
  text-align: left;
}
.header-left .time {
  font-size: 1.2rem;
}
.header-left .date {
  font-size: 0.9rem;
  margin-top: 4px;
  text-align: right;
}
.header-title {
  text-align: center;
}
.header-title h1 {
  font-size: 1.7rem;
  color: var(--heading-text);
}
.header-right {
  text-align: right;
}
.header-right .header-logo {
  height: 50px;
}

/* ----- Footer ----- */
footer {
  position: fixed;
  bottom: 0;
  left: 0;
  width: 100%;
  height: 5vh;
  background: var(--footer-bg);
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 0 20px;
  border-top: 1px solid #333;
  z-index: 1100;
}
.footer-left, .footer-center, .footer-right {
  flex: 1;
  text-align: center;
}
.footer-left .footer-logo {
  height: 30px;
}
.theme-switcher {
  display: flex;
  justify-content: center;
  gap: 5px;
}
.theme-option {
  width: 20px;
  height: 20px;
  cursor: pointer;
  border: 1px solid #ccc;
}
.theme-option[data-theme="dark"] { background: #0d0d0d; }
.theme-option[data-theme="light"] { background: #f5f5f5; }
.theme-option[data-theme="dark-colored"] { background: #3F51B5; }
.theme-option[data-theme="light-colored"] { background: #3F51B5; }
.theme-option[data-theme="gray"] { background: #808080; }
.theme-option[data-theme="vintage"] { background: #a67c52; }
.theme-option[data-theme="ocean"] { background: #3e5c8a; }
.theme-option[data-theme="forest"] { background: #4a6f5c; }
.theme-option[data-theme="sunset"] { background: #ff9966; }
.theme-option[data-theme="neon"] { background: #0ff; }

/* ----- Container for Sections ----- */
/* Top margin (10vh) and bottom margin (5vh) to account for header and footer */
.container {
  margin-top: 10vh;
  margin-bottom: 5vh;
  display: grid;
  grid-template-columns: 1fr 1fr;
  /* Top row (sections A & B): ratio 2fr, bottom row (sections C & D): 1.1fr (10% taller) */
  grid-template-rows: 2fr 1.5fr;
  gap: 15px;
  height: calc(100vh - 15vh);
  overflow: hidden;
}

/* ----- Section Styling ----- */
.section {
  display: flex;
  flex-direction: column;
  background: var(--section-bg);
  border: 1px solid #333333;
  border-radius: 10px;
  box-shadow: 0 2px 10px rgba(0,0,0,0.7);
  overflow: hidden;
}
.section h2 {
  flex-shrink: 0;
  background: var(--heading-bg);
  color: var(--heading-text);
  /* Reduced header height by 20% (from 10px to 8px padding) */
  padding: 8px;
  font-size: 1rem;
  text-align: center;
  border-bottom: 1px solid #333333;
  transition: background 0.3s, transform 0.3s;
}
#sectionD h2 {
  /* For R&D header, reduce height by 40% (e.g. to 6px padding) */
  padding: 6px;
  font-size: 0.95rem;
}
.section h2:hover {
  background: #333333;
  transform: scale(1.02);
}

/* Equipment section (Section B) remains side-by-side */
#sectionB {
  display: flex;
  flex-direction: row;
}
#sectionB .sub-section {
  flex: 1;
  margin: 0 5px;
  display: flex;
  flex-direction: column;
}

/* Inner content fills available space */
.scrollable-content {
  flex: 1;
  overflow: auto;
  padding: 0 10px 10px;
}

/* ----- Table Styles ----- */
table {
  width: 100%;
  border-collapse: collapse;
}
thead, tbody, tr, th, td {
  border: 1px solid #333333;
}
th, td {
  padding: 8px;
  font-size: 0.9rem;
  text-align: left;
  color: var(--text-color);
}
thead th {
  background: var(--heading-bg);
  position: sticky;
  top: 0;
  z-index: 50;
}
td .cell-content {
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
  white-space: normal;
}
td.extra {
  display: none;
}
tr.hovered td .cell-content {
  -webkit-line-clamp: unset;
  overflow: visible;
  white-space: normal;
}
tr.hovered td.extra {
  display: table-cell;
}

/* ----- Overlay for Hover Clones ----- */
#overlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
  z-index: 1500;
}
.hover-clone-table {
  background-color: #ff9800;
  color: #000;
  box-shadow: 0 2px 5px rgba(0,0,0,0.7);
  border: 2px solid #FFEB3B;
}
.hover-clone-table .cell-content {
  -webkit-line-clamp: unset !important;
  overflow: visible !important;
  white-space: normal !important;
}
.hover-clone-table td.extra {
  display: table-cell !important;
}

/* ----- Chart Row & Container ----- */
.chart-row {
  display: flex;
  flex: 1;
  gap: 0px;
  padding: 0px;
  justify-content: space-around;
  align-items: left;
}
#sectionD {
  display: flex;
  flex-direction: column;
  overflow: hidden;
}
.chart-container {
  flex: 1;
  max-width: 25%;
  position: relative;
  height: 100%;
  display: flex;
  justify-content: left;
  align-items: left;
}
.chart-container canvas {
  width: 100% !important;
  height: 100% !important;
}

/* ----- Split-Flap Effect ----- */
#splitFlap {
  display: flex;
  justify-content: center;
  align-items: center;
  font-size: 1rem;
}
@keyframes letterFlipOut {
  from { transform: perspective(400px) rotateX(0deg); opacity: 1; }
  to { transform: perspective(400px) rotateX(90deg); opacity: 0; }
}
@keyframes letterFlipIn {
  from { transform: perspective(400px) rotateX(-90deg); opacity: 0; }
  to { transform: perspective(400px) rotateX(0deg); opacity: 1; }
}
.flip-letter-out { animation: letterFlipOut 0.3s forwards; }
.flip-letter-in { animation: letterFlipIn 0.3s forwards; }

/* ----- Responsive Adjustments ----- */
@media screen and (max-width: 800px) {
  .container {
    grid-template-columns: 1fr;
    grid-template-rows: repeat(4, 1fr);
  }
}
